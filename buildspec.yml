version: 0.2

phases:
  build:
    commands:
      - "echo Build started on `date`"
      - "ls -f"
      - "git status"
      - "git branch"
      - "git checkout $BRANCH"
      - "git config user.name 'CodeBuild'"
      - "git config user.email 'fake@fake.fake'"
      - "if [ $BRANCH != master ]; then git merge master; fi"
      - "python main.py"
  post_build:
    commands:
      - "echo Build completed on `date`"
